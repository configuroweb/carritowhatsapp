<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Men칰 Restaurante</title>

    <!-- Boostrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

    <!-- Style CSS -->
    <link rel="stylesheet" href="./style.css">
</head>
    <body>

        <div id="floating-cart" class="floating-cart">
            游 <span id="cart-count">0</span>
        </div>
        
        
        <div class="main row">

            <div class="container1 col-8">
                <div class="items-container">
                    <h3>Men칰 Restaurante</h3>
                    <div class="items">
                        <!-- Generated by Script -->
                    </div>
                </div>
            </div>

            <div class="container2  col-4">
                <div class="cart-container">
                    <div class="cart">
                        <h4>Pedido</h4>
                        <ul class="list-group cart-list"></ul>
                    </div>

                    <div class="check-out">
                        <p>Total: <span class="total float-right">0</span></p>

                        <div class="buttons row">
                            <button class="btn btn-danger form-control col-5" onclick="clearCart()">Reset</button>
                            <button class="btn btn-secondary form-control col-5" onclick="sendWhatsApp()">Ordenar</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
        
    <script src="./script.js"></script>
    <script>
        // Esta funci칩n obtiene el contenido del carrito de compras y lo convierte en un texto
        function getCartText() {
    let cartList = document.querySelector(".cart-list");
    let cartItems = cartList.querySelectorAll("li");
    let cartText = "";
    let totalAmount = 0;

    cartItems.forEach(item => {
        let name = item.querySelector("div:nth-child(2) > h5").innerText;
        let price = parseFloat(item.dataset.price); // Usar dataset para obtener el precio
        let quantity = parseInt(item.dataset.quantity); // Usar dataset para obtener la cantidad

        let productTotal = price * quantity;
        totalAmount += productTotal;

        cartText += `*${name}* que tiene un valor de _${price.toLocaleString()} COP_ - _Cantidad ${quantity}_\n`;
    });

    cartText += `El costo del pedido ser칤a ${totalAmount.toLocaleString()} COP`;

    return cartText;
}





        // Esta funci칩n abre una nueva pesta침a con el enlace personalizado de WhatsApp
    function sendWhatsApp() {
    
        // Verificar si el carrito est치 vac칤o
    if (cartLists.length === 0 || cartLists.every(item => !item)) {
        alert("Tu carrito est치 vac칤o. Por favor, agrega algunos productos antes de ordenar.");
        return; // Detiene la ejecuci칩n de la funci칩n si el carrito est치 vac칤o
    }

    // Cambia este n칰mero por el tuyo
    let phoneNumber = "+573042702375";
    // Obtiene el texto del carrito de compras
    let cartText = getCartText();
    // Crea el enlace personalizado con el n칰mero y el texto
    let whatsappLink = "https://api.whatsapp.com/send?phone=" + phoneNumber + "&text=" + encodeURIComponent(`Hola, Mauricio, deseo ordenar estos platos:\n ${cartText}`);
    // Abre una nueva pesta침a con el enlace
    window.open(whatsappLink, "_blank");
}
    </script>
    </body>
</html>