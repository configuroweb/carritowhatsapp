<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Menú Restaurante</title>

    <!-- Boostrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

    <!-- Style CSS -->
    <link rel="stylesheet" href="./style.css">
</head>
    <body>
        
        <div class="main row">

            <div class="container1 col-8">
                <div class="items-container">
                    <h3>Menú Restaurante</h3>
                    <div class="items">
                        <!-- Generated by Script -->
                    </div>
                </div>
            </div>

            <div class="container2  col-4">
                <div class="cart-container">
                    <div class="cart">
                        <h4>Pedido</h4>
                        <ul class="list-group cart-list"></ul>
                    </div>

                    <div class="check-out">
                        <p>Subtotal: <span class="subtotal float-right">0</span></p>
                        <p>IVA(12%): <span class="tax float-right">0</span></p>
                        <p>Total: <span class="total float-right">0</span></p>

                        <div class="buttons row">
                            <button class="btn btn-danger form-control col-5" onclick="clearCart()">Reset</button>
                            <button class="btn btn-secondary form-control col-5" onclick="sendWhatsApp()">Ordenar</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
        
    <script src="./script.js"></script>
    <script>
        // Esta función obtiene el contenido del carrito de compras y lo convierte en un texto
        function getCartText() {
    let cartList = document.querySelector(".cart-list");
    let cartItems = cartList.querySelectorAll("li");
    let cartText = "";
    let totalAmount = 0;

    for (let item of cartItems) {
        let name = item.querySelector("div:nth-child(2) > h5").innerText;
        let price = item.querySelector("div:nth-child(3) > h6").innerText;
        let quantity = item.querySelector("div:nth-child(4) > .count").innerText;

        let productTotal = parseFloat(price.replace(/,/g, '')) * parseInt(quantity);
        totalAmount += productTotal;

        cartText += `*${name}* que tiene un valor de _${price} COP_ - _Cantidad ${quantity}_\n`;
    }

    cartText += `El costo del pedido sería ${totalAmount.toLocaleString()} COP`;

    return cartText;
}

        // Esta función abre una nueva pestaña con el enlace personalizado de WhatsApp
        function sendWhatsApp() {
    // Cambia este número por el tuyo
    let phoneNumber = "+573042702375";
    // Obtiene el texto del carrito de compras
    let cartText = getCartText();
    // Crea el enlace personalizado con el número y el texto
    let whatsappLink = "https://api.whatsapp.com/send?phone=" + phoneNumber + "&text=" + encodeURIComponent(`Hola, Mauricio, deseo ordenar estos platos:\n ${cartText}`);
    // Abre una nueva pestaña con el enlace
    window.open(whatsappLink, "_blank");
}
    </script>
    </body>
</html>